services:
  app:
    build: .
    container_name: teams_cli_app
    environment:
      NODE_ENV: production
      DATABASE_URL: file:/app/.teams-cli/teams.db
    ports:
      - '3000:3000'
    volumes:
      - teams_cli_data:/app/.teams-cli
    entrypoint: ['./docker-entrypoint.sh']
    command: ['--help']
    healthcheck:
      test: ['CMD', 'node', 'dist/index.js', '--help']
      interval: 30s
      timeout: 10s
      retries: 3

volumes:
  teams_cli_data:
    driver: local
